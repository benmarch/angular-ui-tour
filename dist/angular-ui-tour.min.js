!function(a){"use strict";a.config(["$uibTooltipProvider",function(a){a.setTriggers({uiTourShow:"uiTourHide"})}])}(angular.module("bm.uiTour",["ngSanitize","ui.bootstrap","smoothScroll","ezNg"])),function(a){"use strict";a.factory("uiTourBackdrop",["TourConfig","$document","$uibPosition",function(a,b,c){function d(){i.addClass("no-scrolling"),i.on("touchmove",k)}function e(){i.removeClass("no-scrolling"),i.off("touchmove",k)}function f(){j.top.css("display","block"),j.bottom.css("display","block"),j.left.css("display","block"),j.right.css("display","block")}function g(){j.top.css("display","none"),j.bottom.css("display","none"),j.left.css("display","none"),j.right.css("display","none")}var h={},i=angular.element(b[0].body),j={top:angular.element(b[0].createElement("div")),bottom:angular.element(b[0].createElement("div")),left:angular.element(b[0].createElement("div")),right:angular.element(b[0].createElement("div"))},k=function(a){a.preventDefault()};return function(){var a=".no-scrolling",c="height: 100%; overflow: hidden;",d=b[0].createElement("style");d.type="text/css",b[0].getElementsByTagName("head")[0].appendChild(d),d.sheet||d.sheet.insertRule?d.sheet.insertRule(a+"{"+c+"}",0):(d.styleSheet||d.sheet).addRule(a,c)}(),j.top.addClass("tour-backdrop").css("display","none"),j.bottom.addClass("tour-backdrop").css("display","none"),j.left.addClass("tour-backdrop").css("display","none"),j.right.addClass("tour-backdrop").css("display","none"),i.append(j.top),i.append(j.bottom),i.append(j.left),i.append(j.right),h.createForElement=function(a,b,e){var g,h,k;b&&d(),g=c.offset(a),h=c.viewportOffset(a),k=c.offset(i),e&&angular.extend(g,h),console.log(g),j.top.css({position:e?"fixed":"absolute",top:0,left:0,width:"100%",height:g.top+"px"}),j.bottom.css({position:e?"fixed":"absolute",left:0,width:"100%",height:k.top+k.height-g.top-g.height+"px",top:g.top+g.height+"px"}),j.left.css({position:e?"fixed":"absolute",top:g.top+"px",width:g.left+"px",height:g.height+"px"}),j.right.css({position:e?"fixed":"absolute",top:g.top+"px",width:k.left+k.width-g.left-g.width+"px",height:g.height+"px",left:g.left+g.width+"px"}),f(),b&&d()},h.hide=function(){g(),e()},h}])}(angular.module("bm.uiTour")),function(a){"use strict";a.provider("TourConfig",[function(){var a={placement:"top",animation:!0,popupDelay:1,closePopupDelay:0,enable:!0,appendToBody:!1,tooltipClass:"",orphan:!1,backdrop:!1,backdropZIndex:1e4,scrollOffset:100,scrollIntoView:!0,useUiRouter:!1,onStart:null,onEnd:null,onPause:null,onResume:null,onNext:null,onPrev:null,onShow:null,onShown:null,onHide:null,onHidden:null};this.set=function(b,c){a[b]=c},this.$get=["$q",function(b){var c={};return c.get=function(b){return a[b]},c.getAll=function(){return angular.copy(a)},function(){angular.forEach(a,function(c,d){0===d.indexOf("on")&&angular.isFunction(c)&&(a[d]=function(){return b.resolve(c())})})}(),c}]}])}(angular.module("bm.uiTour")),function(a){"use strict";a.controller("uiTourController",["$timeout","$q","$filter","TourConfig","uiTourBackdrop","uiTourService","ezEventEmitter",function(a,b,c,d,e,f,g){function h(){return b(function(b){a(b)})}function i(){return v}function j(a){v=a}function k(a){return i()?u[u.indexOf(i())+a]:null}function l(a){if(angular.isNumber(a))return u[a];if(angular.isString(a))return u.filter(function(b){return b.stepId===a})[0];if(angular.isObject(a)){if(~u.indexOf(a))return a;if(a.stepId)return u.filter(function(b){return b.stepId===a.stepId})[0]}return null}function m(){return k(1)}function n(){return k(-1)}function o(){return!(!m()&&!i().nextPath)}function p(){return!(!n()&&!i().prevPath)}function q(a,c){return b(function(b){a.element[0].dispatchEvent(new CustomEvent(c)),b()})}function r(a){return(a||b.resolve)()}var s,t=this,u=[],v=null,w={OFF:0,ON:1,PAUSED:2},x=w.OFF,y=d.getAll();g.mixin(t),t.addStep=function(a){~u.indexOf(a)||(u.push(a),u=c("orderBy")(u,"order"),t.emit("stepAdded",a),s&&s(a))},t.removeStep=function(a){u.splice(u.indexOf(a),1),t.emit("stepRemoved",a)},t.reorderStep=function(a){t.removeStep(a),t.addStep(a),t.emit("stepsReordered",a)},t.hasStep=function(a){return!!l(a)},t.showStep=function(a){return a?r(a.config("onShow")).then(function(){a.config("backdrop")&&e.createForElement(a.element,a.config("preventScrolling"),a.config("fixed"))}).then(function(){return q(a,"uiTourShow")}).then(function(){return h()}).then(function(){return r(a.config("onShown"))}).then(function(){t.emit("stepShown",a),a.isNext=o(),a.isPrev=p()}):b.reject("No step.")},t.hideStep=function(a){return a?r(a.config("onHide")).then(function(){return q(a,"uiTourHide")}).then(function(){a.config("backdrop")&&e.hide()}).then(function(){return h()}).then(function(){return r(a.config("onHidden"))}).then(function(){t.emit("stepHidden",a)}):b.reject("No step.")},t.waitFor=function(a){t.pause(),s=function(b){b.stepId===a&&(j(u[u.indexOf(b)]),t.resume(),s=null)}},t.config=function(a){return y[a]},t.init=function(a){return y=angular.extend(y,a),t.options=y,f._registerTour(t),t.initialized=!0,t.emit("initialized"),t},t.destroy=function(){f._unregisterTour(t)},t.start=function(){return t.startAt(0)},t.startAt=function(a){return r(y.onStart).then(function(){var b=l(a);return j(b),x=w.ON,t.emit("started",b),t.showStep(i())})},t.end=function(){return r(y.onEnd).then(function(){return i()?t.hideStep(i()):void 0}).then(function(){j(null),t.emit("ended"),x=w.OFF})},t.pause=function(){return r(y.onPause).then(function(){return x=w.PAUSED,t.hideStep(i())}).then(function(){t.emit("paused",i())})},t.resume=function(){return r(y.onResume).then(function(){return x=w.ON,t.emit("resumed",i()),t.showStep(i())})},t.next=function(){return t.goTo("$next")},t.prev=function(){return t.goTo("$prev")},t.goTo=function(a){var c=i(),d=l(a),e={$prev:{getStep:n,preEvent:"onPrev",navCheck:"prevStep"},$next:{getStep:m,preEvent:"onNext",navCheck:"nextStep"}};return"$prev"===a||"$next"===a?r(c.config(e[a].preEvent)).then(function(){return t.hideStep(c)}).then(function(){c[e[a].navCheck]&&c[e[a].navCheck]===i().stepId||(j(e[a].getStep()),t.emit("stepChanged",i()))}).then(function(){return i()?t.showStep(i()):void t.end()}):d?t.hideStep(i()).then(function(){return j(d),t.emit("stepChanged",i()),t.showStep(d)}):b.reject("No step.")},t.getCurrentStep=function(){return i()},t.getStatus=function(){return x},t.status=w,t._getSteps=function(){return u},t._getCurrentStep=i,t._setCurrentStep=j}])}(angular.module("bm.uiTour")),function(a){"use strict";a.directive("uiTour",["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"uiTourController",link:function(b,c,d,e){var f={name:d.uiTour},g="onReady onStart onEnd onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),h="placement animation popupDelay closePopupDelay enable appendToBody tooltipClass orphan backdrop scrollOffset scrollIntoView useUiRouter".split(" ");a.attachInterpolatedValues(d,f,h,"uiTour"),a.attachEventHandlers(b,d,f,g,"uiTour"),d[a.getAttrName("options")]&&angular.extend(f,b.$eval(d[a.getAttrName("options")])),b.tour=e.init(f),"function"==typeof f.onReady&&f.onReady(),b.$on("$destroy",function(){e.destroy()})}}}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("TourHelpers",["$templateCache","$http","$compile","$location","TourConfig","$q","$injector",function(a,b,c,d,e,f,g){function h(a){return"true"===a?!0:"false"===a?!1:a}var i,j,k={};return g.has("$state")&&(j=g.get("$state")),i=k.safeApply=function(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},k.attachTourConfigProperties=function(a,b,c,d){angular.forEach(d,function(a){!b[k.getAttrName(a)]&&angular.isDefined(c.config(a))&&b.$set(k.getAttrName(a),String(c.config(a)))})},k.attachEventHandlers=function(a,b,c,d,e){angular.forEach(d,function(d){var g=k.getAttrName(d,e);b[g]&&(c[d]=function(){return f(function(c){i(a,function(){c(a.$eval(b[g]))})})})})},k.attachInterpolatedValues=function(a,b,c,d){angular.forEach(c,function(c){var e=k.getAttrName(c,d);a[e]&&(b[c]=h(a[e]),a.$observe(e,function(a){b[c]=h(a)}))})},k.setRedirect=function(a,b,c,e,g){var h=a[c];a[c]=function(c){return f(function(f){h&&h(c),b.waitFor(g),a.config("useUiRouter")?j.transitionTo(e).then(f):(d.path(e),f())})}},k.getAttrName=function(a,b){return(b||"tourStep")+a.charAt(0).toUpperCase()+a.substr(1)},k}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("uiTourService",[function(){var a={},b=[];return a.getTour=function(){return b[0]},a.getTourByName=function(a){return b.filter(function(b){return b.options.name===a})[0]},a.getTourByElement=function(a){return angular.element(a).controller("uiTour")},a._registerTour=function(a){b.push(a)},a._unregisterTour=function(a){b.splice(b.indexOf(a),1)},a}])}(angular.module("bm.uiTour")),function(a){"use strict";a.directive("tourStep",["TourConfig","TourHelpers","$uibTooltip","$q","$sce",function(a,b,c,d,e){var f=c("tourStep","tourStep","uiTourShow",{popupDelay:1});return{restrict:"EA",scope:!0,require:"^uiTour",compile:function(a,c){c.tourStep||c.$set("tourStep","'PH'");var d=f.compile(a,c);return function(a,c,f,g){function h(){b.attachTourConfigProperties(a,f,k,n,"tourStep"),d(a,c,f)}var i,j,k={stepId:f.tourStep,enabled:!0,config:function(a){return angular.isDefined(k[a])?k[a]:g.config(a)}},l="onShow onShown onHide onHidden onNext onPrev".split(" "),m="content title animation placement backdrop orphan popupDelay popupCloseDelay fixed preventScrolling scrollIntoView nextStep prevStep nextPath prevPath scrollOffset".split(" "),n="animation appendToBody placement popupDelay popupCloseDelay".split(" ");b.attachInterpolatedValues(f,k,m),i=f.$observe(b.getAttrName("order"),function(a){k.order=isNaN(1*a)?0:1*a,g.hasStep(k)&&g.reorderStep(k)}),j=f.$observe(b.getAttrName("enabled"),function(a){k.enabled="false"!==a,k.enabled?g.addStep(k):g.removeStep(k)}),b.attachEventHandlers(a,f,k,l),f[b.getAttrName("templateUrl")]&&(k.templateUrl=a.$eval(f[b.getAttrName("templateUrl")])),f[b.getAttrName("options")]&&angular.extend(k,a.$eval(f[b.getAttrName("options")])),k.nextPath&&(k.redirectNext=!0,b.setRedirect(k,g,"onNext",k.nextPath,k.nextStep)),k.prevPath&&(k.redirectPrev=!0,b.setRedirect(k,g,"onPrev",k.prevPath,k.prevStep)),k.trustedContent=e.trustAsHtml(k.content),a.tourStep=k,a.tour=a.tour||g,g.initialized?(h(),g.addStep(k)):g.once("initialized",function(){h(),g.addStep(k)}),Object.defineProperties(k,{element:{value:c}}),a.$on("$destroy",function(){g.removeStep(k),i(),j()})}}}}]),a.directive("tourStepPopup",["TourConfig","smoothScroll","ezComponentHelpers",function(a,b,c){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"tour-step-popup.html",link:function(d,e){var f=d.originScope().tourStep,g=c.apply(null,arguments),h=f.config("scrollOffset");e.css({zIndex:a.get("backdropZIndex")+2,display:"block"}),f.config("fixed")&&e.css("position","fixed"),f.config("orphan")&&g.useStyles(":scope {   position: fixed;   top: 50% !important;   left: 50% !important;   margin: 0 !important;   -ms-transform: translateX(-50%) translateY(-50%);   -moz-transform: translateX(-50%) translateY(-50%);   -webkit-transform: translateX(-50%) translateY(-50%);   transform: translateX(-50%) translateY(-50%);}.arrow {   display: none;}"),d.$watch("isOpen",function(a){a()&&!f.config("orphan")&&f.config("scrollIntoView")&&b(e[0],{offset:h})})}}}])}(angular.module("bm.uiTour")),angular.module("bm.uiTour").run(["$templateCache",function(a){a.put("tour-step-popup.html",'<div class="popover tour-step"\n     tooltip-animation-class="fade"\n     uib-tooltip-classes\n     ng-class="{ in: isOpen() }">\n    <div class="arrow"></div>\n\n    <div class="popover-inner tour-step-inner">\n        <h3 class="popover-title tour-step-title" ng-bind="title" ng-if="title"></h3>\n        <div class="popover-content tour-step-content"\n             uib-tooltip-template-transclude="originScope().tourStep.config(\'templateUrl\') || \'tour-step-template.html\'"\n             tooltip-template-transclude-scope="originScope()"></div>\n    </div>\n</div>\n'),a.put("tour-step-template.html",'<div>\n    <div class="popover-content tour-step-content" ng-bind-html="tourStep.trustedContent"></div>\n    <div class="popover-navigation tour-step-navigation">\n        <div class="btn-group">\n            <button class="btn btn-sm btn-default" ng-if="tourStep.isPrev" ng-click="tour.prev()">&laquo; Prev</button>\n            <button class="btn btn-sm btn-default" ng-if="tourStep.isNext" ng-click="tour.next()">Next &raquo;</button>\n            <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause"\n                    data-resume-text="Resume" ng-click="tour.pause()">Pause\n            </button>\n        </div>\n        <button class="btn btn-sm btn-default" data-role="end" ng-click="tour.end()">End tour</button>\n    </div>\n</div>\n')}]),function(a){function b(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}b.prototype=a.Event.prototype,a.CustomEvent=b}(window);